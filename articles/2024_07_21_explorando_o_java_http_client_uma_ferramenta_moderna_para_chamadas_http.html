<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Artigo t√©cnico sobre explorando o java http client uma ferramenta moderna para chamadas http">
    <meta name="author" content="Christian Mulato">
    <meta name="keywords" content="Java, APIs, Testes, Maven, DevOps, IA">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="articles/2024_07_21_explorando_o_java_http_client_uma_ferramenta_moderna_para_chamadas_http.html">
    <meta property="og:title" content="Explorando O Java Http Client Uma Ferramenta Moderna Para Chamadas Http">
    <meta property="og:description" content="Artigo t√©cnico sobre explorando o java http client uma ferramenta moderna para chamadas http">
    <meta property="og:image" content="img/2024_07_21_explorando_o_java_http_client_uma_ferramenta_moderna_para_chamadas_http_featured.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="articles/2024_07_21_explorando_o_java_http_client_uma_ferramenta_moderna_para_chamadas_http.html">
    <meta property="twitter:title" content="Explorando O Java Http Client Uma Ferramenta Moderna Para Chamadas Http">
    <meta property="twitter:description" content="Artigo t√©cnico sobre explorando o java http client uma ferramenta moderna para chamadas http">
    <meta property="twitter:image" content="img/2024_07_21_explorando_o_java_http_client_uma_ferramenta_moderna_para_chamadas_http_featured.jpg">
    
    <title>Explorando O Java Http Client Uma Ferramenta Moderna Para Chamadas Http | Christian Mulato Dev Blog</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/article.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="assets/js/article.js" defer></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="../index.html" class="nav-logo">
                    <span class="logo-text">Christian Mulato</span>
                    <span class="logo-subtitle">Dev Blog</span>
                </a>
                
                <div class="nav-links">
                    <a href="../index.html" class="nav-link">Artigos</a>
                    <a href="https://www.linkedin.com/in/chmulato/" class="nav-link" target="_blank">LinkedIn</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="article-meta">
                    <span class="article-category">Java & Spring</span>
                    <time class="article-date" datetime="21/07/2024">21/07/2024</time>
                </div>
                
                <h1 class="article-title">Explorando O Java Http Client Uma Ferramenta Moderna Para Chamadas Http</h1>
                
                <div class="article-info">
                    <span class="article-author">Por Christian Mulato</span>
                    <div class="article-tags"><span class="tag">Java</span> <span class="tag">APIs</span> <span class="tag">Testes</span> <span class="tag">Maven</span> <span class="tag">DevOps</span> <span class="tag">IA</span></div>
                </div>
            </header>
            
            <div class="article-content">
                
<p><img alt="Explorando o Java HTTP Client do Java 11+." src="assets/img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image1.png" /></p>
<p>Explorando o Java HTTP Client do Java 11+.</p>
<p><strong>Explorando o Java HTTP Client: Uma Ferramenta Moderna para Chamadas HTTP</strong></p>
<p><a href="https://www.linkedin.com/in/chmulato/"><img alt="Christian Mulato" src="assets/img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image10.png" /></a></p>
<p><strong><a href="https://www.linkedin.com/in/chmulato/">Christian Mulato</a></strong></p>
<p>Desenvolvedor Java S√™nior na Develcode</p>
<p>21 de julho de 2024</p>
<p>Ol√°, desenvolvedores Java! Hoje, vamos mergulhar em um recurso poderoso introduzido no <strong>Java 11</strong> - o <strong>Java HTTP Client</strong>. Esta API moderna e vers√°til supera as limita√ß√µes da antiga <strong>HttpURLConnection</strong>, oferecendo uma interface mais intuitiva e f√°cil de usar.</p>
<p>O Java HTTP Client suporta <strong>HTTP/2</strong> e <strong>WebSocket</strong>, al√©m de permitir o envio de requisi√ß√µes s√≠ncronas e ass√≠ncronas. Ele pode lidar com diferentes tipos de corpo de requisi√ß√£o e resposta, como String, InputStream, File e diretamente para um Subscriber do <strong>java.util.concurrent.Flow</strong>. Al√©m disso, ele tamb√©m suporta a configura√ß√£o de tempo limite de requisi√ß√£o, autentica√ß√£o autom√°tica e redirecionamento.</p>
<p>Neste artigo, vamos explorar como usar o Java HTTP Client, desde a cria√ß√£o de uma inst√¢ncia at√© a configura√ß√£o de v√°rias op√ß√µes, como timeout, proxy e autentica√ß√£o. Tamb√©m vamos aprender a fazer solicita√ß√µes <strong>GET</strong> e <strong>POST</strong>, a analisar respostas e a lidar com diferentes c√≥digos de status HTTP. Al√©m disso, vamos discutir como testar suas chamadas HTTP e comparar o Java HTTP Client com outras bibliotecas populares.</p>
<p>Ent√£o, se voc√™ est√° procurando uma alternativa moderna e poderosa para fazer chamadas HTTP em compara√ß√£o com a <strong>HttpURLConnection</strong>, continue lendo!</p>
<p>Aqui est√£o os t√≥picos mencionados no documento em ordem de apresenta√ß√£o:</p>
<ul>
<li>Introdu√ß√£o ao Java HTTP Client.</li>
<li>Configura√ß√£o do HttpClient.</li>
<li>Envio de Requisi√ß√µes GET.</li>
<li>An√°lise da Resposta.</li>
<li>Envio de Requisi√ß√µes POST.</li>
<li>Tratamento de Respostas.</li>
<li>Trabalhando com Headers.</li>
<li>Tratamento de Erros e Exce√ß√µes.</li>
<li>AsyncHttpClient e Chamadas Ass√≠ncronas.</li>
<li>Testes Unit√°rios para Clientes HTTP.</li>
<li>Compara√ß√£o com Outras Bibliotecas.</li>
</ul>
<p>Cada t√≥pico aborda diferentes aspectos do <strong>Java HTTP Client</strong>, desde a introdu√ß√£o e configura√ß√£o at√© o tratamento de erros e compara√ß√µes com outras bibliotecas. Isso deve fornecer uma vis√£o abrangente do Java HTTP Client para voc√™s.</p>
<p><strong>Introdu√ß√£o ao Java HTTP Client:</strong></p>
<p>O <strong>Java HTTP Client</strong> √© uma API moderna e vers√°til introduzida no <strong>Java 11</strong> para lidar com requisi√ß√µes HTTP. Ele supera as limita√ß√µes da antiga <strong>HttpURLConnection</strong> ao oferecer uma API mais intuitiva e f√°cil de usar, com suporte para HTTP/2 e WebSocket, al√©m de permitir o envio de requisi√ß√µes s√≠ncronas e ass√≠ncronas. A capacidade de lidar com diferentes tipos de corpo de requisi√ß√£o e resposta, como String, InputStream, File e diretamente para um Subscriber do java.util.concurrent.Flow, torna o Java HTTP Client uma escolha superior. Al√©m disso, ele tamb√©m suporta a configura√ß√£o de tempo limite de requisi√ß√£o, autentica√ß√£o autom√°tica e redirecionamento, o que o torna uma alternativa moderna e poderosa para fazer chamadas HTTP em compara√ß√£o com a HttpURLConnection.</p>
<p>Para usar o Java HTTP Client, voc√™ precisa seguir alguns passos. Aqui est√° um exemplo simples de como fazer uma requisi√ß√£o GET:</p>
<p>![Texto</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image11.png)</p>
<p>Exemplo simples de como fazer uma requisi√ß√£o GET com Java HTTP Client.</p>
<p>Neste exemplo, primeiro criamos um <strong>HttpClient</strong> usando o m√©todo <strong>newHttpClient()</strong>. </p>
<p>Em seguida, constru√≠mos uma requisi√ß√£o HTTP GET para ‚Äúhttp://example.com‚Äù usando <strong>HttpRequest.newBuilder()</strong>. </p>
<p>Finalmente, enviamos a requisi√ß√£o e obtemos a resposta como uma String usando client.send().</p>
<p>Este √© um exemplo b√°sico. O Java HTTP Client √© muito mais poderoso e flex√≠vel, permitindo que voc√™ fa√ßa requisi√ß√µes POST, lidar com redirecionamentos, autentica√ß√£o e muito mais. </p>
<p><strong>Configura√ß√£o do HttpClient:</strong></p>
<p>Vamos abordar aqui um exemplo de como voc√™ pode criar uma inst√¢ncia de <strong>HttpClient</strong> e configur√°-la com op√ß√µes como <strong>timeout</strong>, <strong>proxy</strong> e <strong>autentica√ß√£o</strong> em Java:</p>
<p>![Texto</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image12.png)</p>
<p>Exemplo de como criar uma inst√¢ncia de HttpClient.</p>
<p>Este c√≥digo cria um <strong>HttpClient</strong> com as seguintes configura√ß√µes:</p>
<ul>
<li>Vers√£o HTTP: HTTP/2</li>
<li>Redirecionamento: Normal</li>
<li>Timeout de conex√£o: 20 segundos</li>
<li>Proxy: proxy.example.com na porta 8080</li>
<li>Autentica√ß√£o: Usu√°rio ‚Äúusername‚Äù com senha ‚Äúpassword‚Äù</li>
</ul>
<p>Em seguida, ele cria uma <strong>HttpRequest</strong> para ‚Äúhttp://example.com‚Äù, envia a solicita√ß√£o e imprime a resposta. </p>
<p>Por favor, substitua ‚Äúproxy.example.com‚Äù, ‚Äúusername‚Äù, ‚Äúpassword‚Äù e ‚Äúhttp://example.com‚Äù pelos valores reais que voc√™ deseja usar. </p>
<p>Voc√™ pode configurar o <strong>timeout</strong> de leitura usando o m√©todo <strong>ofSeconds</strong> da classe <strong>Duration</strong> no <strong>HttpClient</strong>. </p>
<p>Aqui est√° um exemplo:</p>
<p>![Texto</p>
<p>Descri√ß√£o gerada automaticamente com confian√ßa baixa](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image13.png)</p>
<p>Exemplo de como criar uma inst√¢ncia de HttpClient com timeout.</p>
<p>Neste exemplo, o timeout de conex√£o √© configurado para 10 segundos. Se a conex√£o n√£o for estabelecida dentro deste per√≠odo, uma exce√ß√£o ser√° lan√ßada.</p>
<p>No entanto, a partir do Java 11, o HttpClient n√£o fornece um m√©todo direto para configurar o timeout de leitura. </p>
<p>O timeout de leitura √© geralmente manipulado no lado do servidor. </p>
<p>Se o servidor n√£o enviar uma resposta dentro de um determinado per√≠odo de tempo, ele fechar√° a conex√£o. Nesse caso, o HttpClient lan√ßar√° uma exce√ß√£o.</p>
<p>Se voc√™ precisar de um controle mais granular sobre o timeout de leitura, pode ser necess√°rio usar uma biblioteca de terceiros que ofere√ßa esse recurso, como o__ Apache HttpClient__ ou o <strong>OkHttp</strong>.</p>
<p><strong>Envio de Requisi√ß√µes GET:</strong></p>
<p>Como podemos fazer uma requisi√ß√£o HTTP GET usando o Java HTTP Client:</p>
<p>![Interface gr√°fica do usu√°rio, Texto, Aplicativo</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image14.png)</p>
<p>Exemplo de requisi√ß√£o HTTP GET em c√≥digo Java com a biblioteca Java HTTP Client.</p>
<p>Este exemplo, estamos criando um novo <strong>HttpClient</strong> e construindo uma solicita√ß√£o __HTTP GET __para ‚Äúhttp://example.com‚Äù. </p>
<p>Em seguida, enviamos a solicita√ß√£o e imprimimos o c√≥digo de status e o corpo da resposta.</p>
<p>Lembre-se de substituir ‚Äúhttp://example.com‚Äù pelo URL do seu destino. </p>
<p>Al√©m disso, este √© um exemplo simples e n√£o inclui o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. </p>
<p>Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes.</p>
<p>Para analisar a resposta JSON e converter em objetos Java, voc√™ pode usar a biblioteca Jackson. Aqui est√° um exemplo de como voc√™ pode fazer isso:</p>
<p>![Interface gr√°fica do usu√°rio</p>
<p>Descri√ß√£o gerada automaticamente com confian√ßa baixa](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image15.png)</p>
<p>Exemplo de uma requisi√ß√£o passando um objeto JSON com a bilbioteca Java HTTP Client.</p>
<p>Neste exemplo, estamos usando a biblioteca Jackson para converter a resposta JSON em um <strong>Map<String, Object></strong>. Primeiro, criamos um novo <strong>ObjectMapper</strong>, que √© a classe principal da biblioteca Jackson. Em seguida, usamos o m√©todo <strong>readValue</strong> para converter a resposta JSON em um mapa.</p>
<p>Lembre-se de adicionar a depend√™ncia da biblioteca <strong>Jackson</strong> ao seu projeto. </p>
<p>Al√©m disso, este √© um exemplo simples e n√£o inclui o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. </p>
<p>Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes. </p>
<p>Al√©m disso, voc√™ pode querer criar classes de modelo para representar a estrutura do seu JSON, em vez de usar um mapa gen√©rico.</p>
<p>Isso tornar√° seu c√≥digo mais leg√≠vel e seguro.</p>
<p><strong>Como fa√ßo para converter JSON em objetos Java usando outras bibliotecas, como o Gson?</strong></p>
<p>Voc√™ pode usar a <strong>biblioteca Java Gson</strong>, do Google, para converter JSON em objetos Java. </p>
<p>Aqui est√° um exemplo de como voc√™ pode fazer isso:</p>
<p>![Texto</p>
<p>Descri√ß√£o gerada automaticamente com confian√ßa m√©dia](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image16.png)</p>
<p>Exemplo de c√≥digo Java para convers√£o de JSON para um objeto Java.</p>
<p>Neste exemplo, estamos usando a biblioteca Gson para converter a resposta JSON em um <strong>Map<String, Object></strong>. Primeiro, criamos um novo objeto Gson. Em seguida, usamos o m√©todo fromJson para converter a resposta JSON em um mapa.</p>
<p>Lembre-se de adicionar a depend√™ncia da biblioteca Gson ao seu projeto. </p>
<p>Al√©m disso, este √© um exemplo simples e n√£o inclui o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes. Al√©m disso, voc√™ pode querer criar classes de modelo para representar a estrutura do seu JSON, em vez de usar um mapa gen√©rico. Isso tornar√° seu c√≥digo mais leg√≠vel e seguro.</p>
<p><strong>Envio de Requisi√ß√µes POST:</strong></p>
<p>Vamos demostrar um outro exemplo de como voc√™ pode preparar e enviar uma solicita√ß√£o HTTP POST usando o Java HTTP Client:</p>
<p><img alt="" src="assets/img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image17.png" /></p>
<p>Exemplo de requisi√ß√£o HTTP POST em c√≥digo Java com a biblioteca Java HTTP Client.</p>
<p>Neste exemplo, estamos criando um novo <strong>HttpClient</strong> e construindo uma solicita√ß√£o <strong>HTTP POST</strong> para ‚Äúhttp://example.com‚Äù. Estamos enviando um JSON como corpo da solicita√ß√£o. Em seguida, enviamos a solicita√ß√£o e imprimimos o c√≥digo de status e o corpo da resposta.</p>
<p>Lembre-se de substituir ‚Äúhttp://example.com‚Äù pelo URL do seu destino e "{\"key\":\"value\"}" pelo seu JSON. Al√©m disso, este √© um exemplo simples e n√£o inclui o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. </p>
<p>Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes. Al√©m disso, voc√™ pode querer adicionar mais cabe√ßalhos conforme necess√°rio para a sua solicita√ß√£o. Por exemplo, alguns servidores podem exigir um cabe√ßalho de autentica√ß√£o.</p>
<p>Aqui est√° um exemplo de como voc√™ pode enviar dados no corpo de uma solicita√ß√£o HTTP POST usando o Java HTTP Client. Vamos mostrar dois exemplos, um para enviar dados JSON e outro para enviar dados de formul√°rio. </p>
<p><strong>Exemplo 1: Enviando dados JSON</strong></p>
<p>![Linha do tempo</p>
<p>Descri√ß√£o gerada automaticamente com confian√ßa m√©dia](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image20.png)</p>
<p>Exemplo de requisi√ß√£o HTTP POST em c√≥digo Java com envio de dados JSON.</p>
<p><strong>Exemplo 2: Enviando dados de formul√°rio</strong></p>
<p>![Interface gr√°fica do usu√°rio, Texto, Aplicativo</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image21.png)</p>
<p>Exemplo de requisi√ß√£o HTTP POST em c√≥digo Java com envio de dados do formul√°rio.</p>
<p>No primeiro exemplo, estamos enviando um JSON como corpo da solicita√ß√£o. </p>
<p>No segundo exemplo, estamos enviando dados de formul√°rio. </p>
<p>Para isso, codificamos cada par de chave-valor como chave=valor e juntamos todos os pares com &amp; para formar a string do corpo da solicita√ß√£o. </p>
<p>Lembre-se de substituir ‚Äúhttp://exemplo.com‚Äù pelo URL do seu destino e os dados do formul√°rio ou JSON pelos seus pr√≥prios dados. Al√©m disso, estes s√£o exemplos simples e n√£o incluem o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. </p>
<p>Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes. Al√©m disso, voc√™ pode querer adicionar mais cabe√ßalhos conforme necess√°rio para a sua solicita√ß√£o. Por exemplo, alguns servidores podem exigir um cabe√ßalho de autentica√ß√£o.</p>
<p><strong>Tratamento de Respostas, como lidar com diferentes c√≥digos de status HTTP (200, 404, 500):</strong></p>
<p>Aqui est√° um exemplo de como voc√™ pode lidar com diferentes c√≥digos de status HTTP usando o Java HTTP Client:</p>
<p>![Uma imagem contendo Texto</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image22.png)</p>
<p>Exemplo de c√≥digo de requisi√ß√£o com Java HTTP Client com tratamento do status de resposta.</p>
<p>Neste exemplo, estamos verificando o c√≥digo de status da resposta HTTP e lidando com diferentes c√≥digos de status. </p>
<p>Se o c√≥digo de status for entre 200 e 299, isso significa que a solicita√ß√£o foi bem-sucedida e podemos ler o corpo da resposta. </p>
<p>Se o c√≥digo de status for 404, isso significa que o recurso solicitado n√£o foi encontrado. </p>
<p>Se o c√≥digo de status for entre 500 e 599, isso significa que houve um erro no servidor.</p>
<p>Lembre-se de substituir ‚Äúhttp://exemplo.com‚Äù pelo URL do seu destino. </p>
<p>Al√©m disso, este √© um exemplo simples e n√£o inclui o tratamento de erros adequado que voc√™ deve incluir no c√≥digo de produ√ß√£o. </p>
<p>Por exemplo, voc√™ pode querer adicionar um bloco try-catch para lidar com poss√≠veis exce√ß√µes. Al√©m disso, voc√™ pode querer lidar com outros c√≥digos de status HTTP conforme necess√°rio para a sua aplica√ß√£o. Em alguns servidores podem retornar um c√≥digo de status 401 para solicita√ß√µes n√£o autenticadas. Nesse caso, voc√™ pode querer adicionar um caso para lidar com o c√≥digo de status 401.Ao receber uma resposta HTTP, voc√™ pode processar a resposta de v√°rias maneiras. </p>
<p>Se a resposta for bem-sucedida (c√≥digo de status HTTP 200), voc√™ pode extrair informa√ß√µes do corpo da resposta. O corpo da resposta pode ser um JSON, XML ou outro formato de dados. Para extrair informa√ß√µes, voc√™ pode usar bibliotecas como Jackson ou Gson para converter a resposta em objetos Java. Por exemplo, se a resposta for um JSON, voc√™ pode converter o JSON em um Map<String, Object> ou em uma classe de modelo Java que corresponda √† estrutura do JSON. Isso permite que voc√™ acesse facilmente as informa√ß√µes na resposta.</p>
<p><strong>Trabalhando com Headers:</strong></p>
<p>Vamos mostrar aqui como adicionar, modificar e ler cabe√ßalhos HTTP em solicita√ß√µes e respostas. Um exemplo de como voc√™ pode adicionar, modificar e ler cabe√ßalhos HTTP usando o HttpClient do Java.</p>
<p><img alt="" src="assets/img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image23.png" /></p>
<p>Exemplo de c√≥digo de requisi√ß√£o com Java HTTP Client com modifica√ß√£o do cabe√ßalho HTTP.</p>
<p>Neste exemplo, primeiro criamos um <strong>HttpClient</strong> e uma <strong>HttpRequest</strong>. Adicionamos um cabe√ßalho personalizado √† solicita√ß√£o com o m√©todo <strong>.header()</strong>. Em seguida, enviamos a solicita√ß√£o e obtemos a resposta. Para ler os cabe√ßalhos da resposta, usamos o m√©todo .headers() na resposta, que retorna um <strong>HttpHeaders</strong>. Em seguida, imprimimos todos os cabe√ßalhos. Para modificar um cabe√ßalho, criamos uma nova solicita√ß√£o com o mesmo URI que a solicita√ß√£o original, mas com um valor de cabe√ßalho diferente. Em seguida, enviamos a nova solicita√ß√£o e lemos os cabe√ßalhos da nova resposta da mesma maneira.</p>
<p><strong>Tratamento de Erros e Exce√ß√µes:</strong></p>
<p>Para o tratamento de erros e exce√ß√µes, poderia explicar como tratar exce√ß√µes relacionadas a conex√µes, timeouts e erros de servidor. Aqui est√° um exemplo de como voc√™ pode tratar exce√ß√µes usando o HttpClient do Java.</p>
<p>![Uma imagem contendo Tabela</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image24.png)</p>
<p>Exemplo de c√≥digo de requisi√ß√£o com Java HTTP Client tratamento de erro try-catch.</p>
<p>Neste exemplo, primeiro criamos um <strong>HttpClient</strong> e uma <strong>HttpRequest</strong>. Em seguida, enviamos a solicita√ß√£o dentro de um bloco <strong>try-catch</strong>.</p>
<p>Se a solicita√ß√£o for bem-sucedida, verificamos o c√≥digo de status da resposta. Se o c√≥digo de status for entre 200 e 299, a solicita√ß√£o foi bem-sucedida. Se o c√≥digo de status for 300 ou superior, houve um erro no servidor.</p>
<p>Se ocorrer uma exce√ß√£o durante o envio da solicita√ß√£o, ela ser√° capturada e tratada no bloco catch. Tratamos tr√™s tipos de exce√ß√µes neste exemplo:</p>
<ul>
<li>__HttpTimeoutException: __Esta exce√ß√£o √© lan√ßada quando a solicita√ß√£o excede o tempo limite.</li>
<li><strong>IOException:</strong> Esta exce√ß√£o √© lan√ßada quando ocorre um erro de conex√£o.</li>
<li>__ InterruptedException:__ Esta exce√ß√£o √© lan√ßada quando a solicita√ß√£o √© interrompida.</li>
</ul>
<p>Cada tipo de exce√ß√£o √© tratado de maneira diferente, imprimindo uma mensagem de erro apropriada. Voc√™ pode personalizar o tratamento de exce√ß√µes para atender √†s suas necessidades espec√≠ficas. Por exemplo, voc√™ pode tentar enviar a solicita√ß√£o novamente se ela exceder o tempo limite, ou voc√™ pode registrar o erro de conex√£o para an√°lise posterior.</p>
<p><strong>AsyncHttpClient e Chamadas Ass√≠ncronas:</strong></p>
<p>O <strong>Java HTTP Client</strong> suporta tanto chamadas s√≠ncronas quanto ass√≠ncronas. As chamadas s√≠ncronas s√£o bloqueantes, o que significa que o thread que faz a chamada √© bloqueado at√© que a resposta seja recebida. As chamadas ass√≠ncronas, por outro lado, s√£o n√£o bloqueantes. Elas retornam imediatamente com um <strong>CompletableFuture</strong>, que pode ser usado para processar a resposta quando ela estiver dispon√≠vel.</p>
<p>Aqui est√° um exemplo de como voc√™ pode fazer uma chamada ass√≠ncrona com o <strong>HttpClient</strong>:</p>
<p>![Uma imagem contendo Linha do tempo</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image25.png)</p>
<p>Exemplo de c√≥digo de requisi√ß√£o com Java HTTP Client com chamada ass√≠ncrona.</p>
<p>Neste exemplo, usamos o m√©todo <strong>sendAsync()</strong> para enviar a solicita√ß√£o, que retorna um <strong>CompletableFuture</strong>. Usamos o m√©todo <strong>thenAccept()</strong> no <strong>CompletableFuture</strong> para processar a resposta quando ela estiver dispon√≠vel. </p>
<p>Se ocorrer um erro ao enviar a solicita√ß√£o, ele ser√° tratado no bloco <strong>exceptionally()</strong>.</p>
<p>Os benef√≠cios das chamadas ass√≠ncronas incluem:</p>
<ul>
<li><strong>N√£o bloqueantes:</strong> As chamadas ass√≠ncronas s√£o n√£o bloqueantes, o que significa que seu aplicativo pode continuar fazendo outras coisas enquanto espera pela resposta.</li>
<li><strong>Efici√™ncia de recursos:</strong> As chamadas ass√≠ncronas podem ser mais eficientes em termos de recursos, especialmente se seu aplicativo precisa fazer muitas solicita√ß√µes de rede, pois elas podem ser feitas em paralelo.</li>
<li><strong>Melhor desempenho:</strong> Em muitos casos, as chamadas ass√≠ncronas podem melhorar o desempenho do seu aplicativo, pois elas permitem que seu aplicativo fa√ßa um melhor uso dos recursos do sistema.</li>
</ul>
<p>No entanto, as chamadas ass√≠ncronas tamb√©m podem ser mais complexas de implementar e depurar do que as chamadas s√≠ncronas, pois voc√™ precisa lidar com chamadas ass√≠ncronas "futures" e possivelmente com concorr√™ncia. Portanto, √© importante entender bem esses conceitos antes de decidir usar chamadas ass√≠ncronas.</p>
<p><strong>Testes Unit√°rios para Clientes HTTP:</strong></p>
<p>Vamos abordar como testar suas chamadas HTTP usando bibliotecas como <strong>JUnit</strong> e <strong>Mockito</strong>. Aqui est√° um exemplo de como voc√™ pode testar suas chamadas HTTP usando JUnit e Mockito.</p>
<p>Primeiro, voc√™ precisar√° adicionar as depend√™ncias do JUnit e Mockito ao seu arquivo pom.xml se estiver usando Maven:</p>
<p>![Texto, Linha do tempo</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image26.png)</p>
<p>Depend√™ncias do JUnit e Mockito no Maven.</p>
<p>Aqui est√° um exemplo de teste unit√°rio para uma classe que faz uma chamada HTTP:</p>
<p>![Uma imagem contendo Tabela</p>
<p>Descri√ß√£o gerada automaticamente](img/2024_07_21_Explorando o Java HTTP Client Uma Ferramenta Moderna para Chamadas HTTP_image1.png)</p>
<p>Exemplo de teste unit√°rio com c√≥digo aplicando a biblioteca Java HTTP Client.</p>
<p>Neste exemplo, criamos um <strong>HttpClient</strong> e <strong>HttpResponse</strong> falsos usando__ Mockito.mock().<strong> Em seguida, definimos o comportamento do HttpClient falso para retornar a HttpResponse falsa quando o m√©todo __send()</strong> √© chamado. Definimos o comportamento da HttpResponse falsa para retornar uma string fixa quando o m√©todo <strong>body()</strong> √© chamado.</p>
<p>Em seguida, criamos uma <strong>HttpRequest</strong> e usamos o <strong>HttpClient</strong> falso para envi√°-la. Verificamos se a resposta √© a esperada usando <strong>assertEquals().</strong></p>
<p>Este √© um exemplo simples, mas voc√™ pode criar testes mais complexos dependendo das suas necessidades. Por exemplo, voc√™ pode verificar se o m√©todo <strong>send()</strong> foi chamado com os par√¢metros corretos, ou voc√™ pode testar como seu c√≥digo lida com diferentes c√≥digos de status de resposta.</p>
<p><strong>Compara√ß√£o com Outras Bibliotecas:</strong></p>
<p>Em compara√ß√£o do Java HTTP Client com outras bibliotecas populares como Apache HttpClient, OkHttp e Retrofit:</p>
<ul>
<li><strong>Java HTTP Client:</strong> A partir do Java 11, o Java HTTP Client tornou-se parte da biblioteca padr√£o do Java (java.net.http). Ele suporta HTTP/1.1 e HTTP/2, bem como comunica√ß√£o WebSocket. Ele tamb√©m suporta chamadas s√≠ncronas e ass√≠ncronas, o que √© uma grande vantagem. Al√©m disso, por ser parte da biblioteca padr√£o do Java, n√£o requer depend√™ncias adicionais, o que pode simplificar o gerenciamento de depend√™ncias.</li>
<li>__Apache HttpClient: __O Apache HttpClient existe h√° muito tempo e √© uma biblioteca madura e rica em recursos. Ele suporta HTTP/1.1, mas n√£o suporta HTTP/2 ou WebSocket. Ele tamb√©m n√£o suporta chamadas ass√≠ncronas fora da caixa, embora exista uma biblioteca separada (HttpAsyncClient) que adiciona esse suporte. Uma vantagem do Apache HttpClient √© que ele oferece um controle muito granular sobre a configura√ß√£o da conex√£o e do protocolo.</li>
<li>__OkHttp: __O OkHttp √© uma biblioteca moderna que suporta HTTP/2 e WebSocket, al√©m de HTTP/1.1. Ele tamb√©m suporta chamadas s√≠ncronas e ass√≠ncronas. Uma caracter√≠stica not√°vel do OkHttp √© que ele possui uma API muito limpa e f√°cil de usar. Ele tamb√©m tem um bom suporte para interceptadores, que podem ser usados para adicionar comportamentos personalizados √†s solicita√ß√µes e respostas.</li>
<li>__Retrofit: __O Retrofit √© na verdade um tipo diferente de biblioteca em compara√ß√£o com as outras mencionadas aqui. Em vez de ser uma biblioteca de cliente HTTP de baixo n√≠vel, o Retrofit √© um ‚Äúconversor de tipo seguro para HTTP‚Äù. Ele usa anota√ß√µes em interfaces para gerar um cliente HTTP. Isso pode tornar o c√≥digo muito mais limpo e f√°cil de entender, especialmente para APIs REST grandes e complexas. No entanto, o Retrofit n√£o √© uma biblioteca de cliente HTTP completa por si s√≥ - ele precisa ser emparelhado com uma biblioteca de cliente HTTP de baixo n√≠vel, como OkHttp.</li>
</ul>
<p>Em resumo, o Java HTTP Client √© uma escolha s√≥lida para muitos casos de uso, especialmente se voc√™ estiver usando o Java 11 ou posterior e quiser manter suas depend√™ncias ao m√≠nimo. Ele pode n√£o ter todos os recursos avan√ßados de bibliotecas como Apache HttpClient ou OkHttp, mas para muitos casos de uso, os recursos que ele oferece ser√£o mais do que suficientes. Al√©m disso, o suporte para HTTP/2 e WebSocket, bem como chamadas ass√≠ncronas, s√£o vantajosas.</p>
<p><strong>Conclus√£o</strong></p>
<p>Neste artigo, exploramos o poder e a versatilidade do__ Java HTTP Client__, uma adi√ß√£o bem-vinda ao Java 11 que supera as limita√ß√µes da antiga <strong>HttpURLConnection</strong>. Com suporte para HTTP/2 e WebSocket, al√©m de uma variedade de op√ß√µes de configura√ß√£o, o __Java HTTP Client __√© uma ferramenta indispens√°vel para qualquer desenvolvedor Java que trabalhe com chamadas HTTP.</p>
<p>Aprendemos como fazer solicita√ß√µes GET e POST, configurar v√°rias op√ß√µes e analisar respostas. Tamb√©m discutimos como testar suas chamadas HTTP e comparamos o Java HTTP Client com outras bibliotecas populares.</p>
<p>Esperamos que este artigo tenha sido √∫til para voc√™ entender melhor o Java HTTP Client e como ele pode ser usado para melhorar suas aplica√ß√µes. Lembre-se, a pr√°tica leva √† perfei√ß√£o. Portanto, incentive-se a experimentar o Java HTTP Client em seus projetos e descubra por si mesmo o qu√£o poderoso ele pode ser.</p>
<p>Obrigado por ler e feliz codifica√ß√£o!</p>
            </div>
            
            <footer class="article-footer">
                <div class="article-author-bio">
                    <h3>Sobre o Autor</h3>
                    <p><strong>Christian Mulato</strong> √© Desenvolvedor Java S√™nior especializado em arquiteturas escal√°veis e microsservi√ßos. 
                    Com experi√™ncia em Spring Boot, Docker, APIs REST e sistemas distribu√≠dos.</p>
                    <a href="https://www.linkedin.com/in/chmulato/" target="_blank" class="author-link">
                        Conecte-se no LinkedIn
                    </a>
                </div>
                
                <div class="article-navigation">
                    <a href="../index.html" class="back-link">‚Üê Voltar aos artigos</a>
                </div>
            </footer>
        </article>
    </main>
    
    <footer class="site-footer">
        <div class="footer-container">
            <p>&copy; 2025 Christian Mulato. Todos os direitos reservados.</p>
        </div>
    </footer>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                <h3>Christian Mulato</h3>
                <p>Desenvolvedor Java S√™nior especializado em Spring Boot, APIs REST e arquitetura de microsservi√ßos.</p>
            </div>
            <div class="footer-links">
                <a href="https://www.linkedin.com/in/chmulato/" target="_blank">LinkedIn</a>
                <a href="https://github.com/chmulato" target="_blank">GitHub</a>
                <a href="../index.html">Artigos</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Christian Mulato. Todos os direitos reservados.</p>
        </div>
    </footer>
    
    <!-- Theme Toggle Button -->
    <button id="themeToggle" class="theme-toggle" aria-label="Alternar tema">
        <span id="themeIcon">üåô</span>
    </button>
    
    <script>
        // Tema manager
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.themeIcon = document.getElementById('themeIcon');
                this.init();
            }
            
            init() {
                const savedTheme = localStorage.getItem('theme');
                const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                const currentTheme = savedTheme || systemTheme;
                
                this.setTheme(currentTheme);
                this.updateIcon(currentTheme);
                
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
            }
            
            toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                
                this.setTheme(newTheme);
                this.updateIcon(newTheme);
                localStorage.setItem('theme', newTheme);
            }
            
            setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
            }
            
            updateIcon(theme) {
                this.themeIcon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
                this.themeToggle.setAttribute('aria-label', 
                    theme === 'light' ? 'Ativar tema escuro' : 'Ativar tema claro');
            }
        }
        
        // Inicializar quando DOM carregar
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
        });
    </script>
</body>
</html>

