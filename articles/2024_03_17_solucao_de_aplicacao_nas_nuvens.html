<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Artigo técnico sobre solução de aplicação nas nuvens">
    <meta name="author" content="Christian Mulato">
    <meta name="keywords" content="Java, Docker, Kubernetes, APIs, Testes, Kafka">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://chmulato.dev/articles/2024_03_17_solucao_de_aplicacao_nas_nuvens.html">
    <meta property="og:title" content="Solução De Aplicação Nas Nuvens">
    <meta property="og:description" content="Artigo técnico sobre solução de aplicação nas nuvens">
    <meta property="og:image" content="https://chmulato.dev/img/2024_03_17_solucao_de_aplicacao_nas_nuvens_featured.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://chmulato.dev/articles/2024_03_17_solucao_de_aplicacao_nas_nuvens.html">
    <meta property="twitter:title" content="Solução De Aplicação Nas Nuvens">
    <meta property="twitter:description" content="Artigo técnico sobre solução de aplicação nas nuvens">
    <meta property="twitter:image" content="https://chmulato.dev/img/2024_03_17_solucao_de_aplicacao_nas_nuvens_featured.jpg">
    
    <title>Solução De Aplicação Nas Nuvens | Christian Mulato Dev Blog</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/article.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="assets/js/article.js" defer></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="../index.html" class="nav-logo">
                    <span class="logo-text">Christian Mulato</span>
                    <span class="logo-subtitle">Dev Blog</span>
                </a>
                
                <div class="nav-links">
                    <a href="../index.html" class="nav-link">Artigos</a>
                    <a href="https://www.linkedin.com/in/chmulato/" class="nav-link" target="_blank">LinkedIn</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="article-meta">
                    <span class="article-category">Java & Spring</span>
                    <time class="article-date" datetime="17/03/2024">17/03/2024</time>
                </div>
                
                <h1 class="article-title">Solução De Aplicação Nas Nuvens</h1>
                
                <div class="article-info">
                    <span class="article-author">Por Christian Mulato</span>
                    <div class="article-tags"><span class="tag">Java</span> <span class="tag">Docker</span> <span class="tag">Kubernetes</span> <span class="tag">APIs</span> <span class="tag">Testes</span> <span class="tag">Kafka</span></div>
                </div>
            </header>
            
            <div class="article-content">
                
<p><img alt="Solução de aplicação nas nuvens" src="assets/img/2024_03_17_Solução de aplicação nas nuvens_image1.png" /></p>
<p><strong>Solução de aplicação nas nuvens</strong></p>
<p><a href="https://www.linkedin.com/in/chmulato/"><img alt="Christian Mulato" src="assets/img/2024_03_17_Solução de aplicação nas nuvens_image3.png" /></a></p>
<p><strong><a href="https://www.linkedin.com/in/chmulato/">Christian Mulato</a></strong></p>
<p>Desenvolvedor Java Sênior na Develcode</p>
<p>17 de março de 2024</p>
<p><strong>Apache OpenWhisk</strong> é uma plataforma <strong><em>serverless</em></strong> de código aberto que executa funções em resposta a eventos em qualquer escala. Ela gerencia a infraestrutura, servidores e escalabilidade usando <strong>contêineres Docker</strong>, permitindo que você se concentre em construir aplicativos incríveis e eficientes.</p>
<p>Aqui estão os principais aspectos do <strong>Apache OpenWhisk</strong>:</p>
<p><strong>1. Execução de Funções (fx)</strong>: O OpenWhisk permite que você escreva <strong>lógica funcional</strong> (chamada de <strong>Actions</strong>) em qualquer linguagem de programação suportada. Essas ações podem ser agendadas dinamicamente e executadas em resposta a eventos associados (por meio de <strong>Triggers</strong>) de fontes externas (como <strong>Feeds</strong>) ou de <strong>solicitações HTTP</strong>.</p>
<p><strong>2. Deploys em Qualquer Lugar</strong>: Como o OpenWhisk baseia seus componentes em contêineres, ele oferece suporte a várias opções de implantação, tanto localmente quanto em infraestruturas de nuvem. Isso inclui estruturas populares de contêineres, como <strong>Kubernetes</strong>, <strong>OpenShift</strong> e <strong>Compose</strong>.</p>
<p><strong>3. Suporte a Múltiplas Linguagens</strong>: O OpenWhisk suporta várias linguagens, incluindo <strong>Go, Java, NodeJS, .NET, PHP, Python, Ruby, Rust, Scala</strong> e <strong>Swift</strong>. Além disso, há um tempo de execução experimental para <strong>Deno</strong> em desenvolvimento.</p>
<p><strong>4. Integração com Serviços Populares</strong>: O OpenWhisk facilita a integração de suas ações com muitos serviços populares usando <strong>Packages</strong>. Esses pacotes oferecem integrações com serviços como filas de mensagens <strong>Kafka</strong>, bancos de dados como <strong>Cloudant</strong>, notificações push de aplicativos móveis, mensagens do <strong>Slack</strong> e feeds <strong>RSS</strong>. Você também pode usar o pacote <strong>Alarms</strong> para agendar a execução de suas ações em horários específicos ou intervalos recorrentes.</p>
<p><strong>5. Composições Ricas</strong>: O OpenWhisk permite combinar suas funções em composições ricas. Você pode escrever código em diferentes idiomas, como <strong>JavaScript/NodeJS, Swift, Python, Java</strong> ou executar lógica personalizada empacotando o código com <strong>Docker</strong>.</p>
<p>Em resumo, o <strong>Apache OpenWhisk</strong> oferece uma maneira flexível e escalável de criar aplicativos serverless, permitindo que você se concentre na lógica de negócios e na criação de soluções independentes de nuvem.</p>
<p>Aqui está um exemplo simples de como criar uma ação (ou função) usando o <strong>Apache OpenWhisk</strong>. Vamos supor que queremos criar uma ação que some dois números:</p>
<p>// Javascript - Arquivo: soma.js</p>
<p>function main(params) {</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span>\<span class="p">{</span><span class="w"> </span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span>\<span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">params</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span>\<span class="p">(</span>\<span class="o">!</span><span class="n">num1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>\<span class="o">!</span><span class="n">num2</span>\<span class="p">)</span><span class="w"> </span>\<span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span>\<span class="p">{</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Por favor, forneça os números para somar\.&#39;</span><span class="w"> </span>\<span class="p">};</span>

\<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span>\<span class="o">+</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>

<span class="k">return</span><span class="w"> </span>\<span class="p">{</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span>\<span class="p">};</span>
</code></pre></div>

<p>}</p>
<p>Neste exemplo:</p>
<p>- Criamos uma função chamada <em>main</em> que recebe um objeto <em>params</em>.</p>
<p>- Verificamos se os números <em>num1</em> e <em>num2</em> foram fornecidos.</p>
<p>- Se sim, somamos os números e retornamos o resultado.</p>
<p>Para criar essa ação no OpenWhisk, você pode usar o seguinte comando na linha de comando:</p>
<p>wsk action create minha-soma soma.js</p>
<p>Agora, você pode invocar essa ação passando os parâmetros <em>num1</em> e <em>num2</em>:</p>
<p>wsk action invoke minha-soma --param num1 10 --param num2 20</p>
<p>Isso retornará um objeto JSON com o resultado da soma:</p>
<p>// Arquivo - JSON</p>
<p>{</p>
<p>"resultado": 30</p>
<p>}</p>
<p>Lembre-se de que este é apenas um exemplo básico. O OpenWhisk oferece muito mais recursos, como gatilhos, regras e composições, para criar soluções <em>serverless</em> mais complexas.</p>
<p>Para usar o <strong>Apache OpenWhisk</strong> localmente em um sistema operacional Linux, você pode seguir estas etapas:</p>
<p><strong>1. Instalação do Docker e Docker Compose:</strong></p>
<p>- Certifique-se de ter o <strong>Docker</strong> instalado em sua máquina. Se ainda não o tiver, instale-o.</p>
<p>- Em seguida, instale o <strong>Docker Compose</strong>, que é uma ferramenta para definir e executar aplicativos Docker com vários contêineres.</p>
<p><strong>2. Clone o Repositório do OpenWhisk:</strong></p>
<p>- Abra um terminal e execute o seguinte comando para clonar o repositório do OpenWhisk:</p>
<p>git clone https://github.com/apache/openwhisk.git</p>
<p><strong>3. Configuração do Ambiente:</strong></p>
<p>- Navegue para o diretório openwhisk/tools/ubuntu-setup.</p>
<p>- Execute o script de configuração para instalar as dependências necessárias:</p>
<p>cd openwhisk/tools/ubuntu-setup</p>
<div class="highlight"><pre><span></span><code> \./all\.sh
</code></pre></div>

<p><strong>4. Inicie o OpenWhisk Localmente:</strong></p>
<p>- Execute o seguinte comando para iniciar o OpenWhisk localmente usando o Docker Compose:</p>
<p>docker-compose -f docker-compose.yml -f docker-compose.local.yml up</p>
<p><strong>5. Verifique a Instalação:</strong></p>
<p>- Após a inicialização, você pode verificar se o OpenWhisk está funcionando corretamente. Abra um navegador e acesse:</p>
<p>http://localhost:3233</p>
<p>Você verá a interface da API do OpenWhisk.</p>
<p><strong>6. Use o CLI do OpenWhisk:</strong></p>
<p>- Instale o CLI do OpenWhisk (wsk) em sua máquina. Você pode baixá-lo a partir do repositório oficial do OpenWhisk.</p>
<p>- Configure o CLI para apontar para o ambiente local:</p>
<p>wsk property set --apihost localhost --auth <sua\_chave\_de\_autenticação></p>
<p><strong>7. Crie e Execute Ações:</strong></p>
<p>- Agora você pode criar suas próprias ações e invocá-las localmente usando o CLI do OpenWhisk.</p>
<p>Lembre-se de que essa é uma configuração básica para uso local.</p>
<p>Implantar uma ação do <strong>Apache OpenWhisk</strong> em um ambiente de produção envolve algumas etapas importantes. Vou fornecer uma visão geral, mas lembre-se de que os detalhes específicos podem variar com base na sua infraestrutura e requisitos.</p>
<p><img alt="Esquema das tecnologias Apache OpenWhisk" src="assets/img/2024_03_17_Solução de aplicação nas nuvens_image1.png" /></p>
<p>Um exemplo esquemático das tecnologias envolvidas.</p>
<p><strong>1. Configuração do Ambiente</strong>:</p>
<p>- Ambiente OpenWhisk: Primeiro, você precisa ter um ambiente OpenWhisk configurado. Isso pode ser local (usando o OpenWhisk em um cluster Kubernetes ou Docker Compose) ou em uma nuvem pública (como IBM Cloud, AWS, Google Cloud, etc.).</p>
<p>- <strong>Credenciais</strong>: Certifique-se de ter as credenciais corretas para acessar o ambiente OpenWhisk.</p>
<p><strong>2. Empacotamento da Ação:</strong></p>
<p>- Empacote sua ação (no nosso exemplo, a ação de soma) em um arquivo ZIP ou contêiner Docker. Isso inclui o código da ação e quaisquer dependências necessárias.</p>
<p><strong>3. Criação da Ação:</strong></p>
<p>- Use o comando wsk action create para criar a ação no OpenWhisk. Por exemplo:</p>
<p>wsk action create minha-soma soma.js</p>
<p><strong>4. Teste da Ação:</strong></p>
<p>- Antes de implantar em produção, teste sua ação para garantir que ela funcione conforme o esperado. Use o comando wsk action invoke para testar a ação com diferentes parâmetros.</p>
<p><strong>5. Gerenciamento de Segurança:</strong></p>
<p>- Configure as permissões corretas para a ação. Defina quem pode invocar a ação e quem pode gerenciá-la.</p>
<p>- Considere usar <strong>chaves de API</strong> ou <strong>tokens de autenticação</strong> para proteger o acesso à sua ação.</p>
<p><strong>6. Monitoramento e Logs:</strong></p>
<p>- Configure o monitoramento para sua ação. Isso pode incluir métricas, logs e alertas.</p>
<p>- Use ferramentas como <strong>Prometheus</strong>, <strong>Grafana</strong> ou serviços de monitoramento da nuvem.</p>
<p><strong>7. Escalabilidade e Redundância:</strong></p>
<p>- Planeje a escalabilidade da sua ação. Como ela se comportará sob carga pesada?</p>
<p>- Considere a redundância para evitar pontos únicos de falha.</p>
<p><strong>8. Implantação em Produção:</strong></p>
<p>- Finalmente, implante sua ação no ambiente de produção. Isso pode ser feito usando o mesmo comando <em>wsk action update</em> ou por meio de ferramentas de CI/CD.</p>
<p>Lembre-se de que essas etapas são uma visão geral. Dependendo do seu caso de uso específico, você pode precisar ajustar ou adicionar etapas adicionais. Consulte a documentação do <a href="https://openwhisk.apache.org/documentation.html"><strong>Apache OpenWhisk</strong></a> e as práticas recomendadas para obter mais detalhes sobre a implantação em produção.</p>
            </div>
            
            <footer class="article-footer">
                <div class="article-author-bio">
                    <h3>Sobre o Autor</h3>
                    <p><strong>Christian Mulato</strong> é Desenvolvedor Java Sênior especializado em arquiteturas escaláveis e microsserviços. 
                    Com experiência em Spring Boot, Docker, APIs REST e sistemas distribuídos.</p>
                    <a href="https://www.linkedin.com/in/chmulato/" target="_blank" class="author-link">
                        Conecte-se no LinkedIn
                    </a>
                </div>
                
                <div class="article-navigation">
                    <a href="../index.html" class="back-link">← Voltar aos artigos</a>
                </div>
            </footer>
        </article>
    </main>
    
    <footer class="site-footer">
        <div class="footer-container">
            <p>&copy; 2025 Christian Mulato. Todos os direitos reservados.</p>
        </div>
    </footer>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                <h3>Christian Mulato</h3>
                <p>Desenvolvedor Java Sênior especializado em Spring Boot, APIs REST e arquitetura de microsserviços.</p>
            </div>
            <div class="footer-links">
                <a href="https://www.linkedin.com/in/chmulato/" target="_blank">LinkedIn</a>
                <a href="https://github.com/chmulato" target="_blank">GitHub</a>
                <a href="../index.html">Artigos</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Christian Mulato. Todos os direitos reservados.</p>
        </div>
    </footer>
    
    <!-- Theme Toggle Button -->
    <button id="themeToggle" class="theme-toggle" aria-label="Alternar tema">
        <span id="themeIcon">🌙</span>
    </button>
    
    <script>
        // Tema manager
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.themeIcon = document.getElementById('themeIcon');
                this.init();
            }
            
            init() {
                const savedTheme = localStorage.getItem('theme');
                const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                const currentTheme = savedTheme || systemTheme;
                
                this.setTheme(currentTheme);
                this.updateIcon(currentTheme);
                
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
            }
            
            toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                
                this.setTheme(newTheme);
                this.updateIcon(newTheme);
                localStorage.setItem('theme', newTheme);
            }
            
            setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
            }
            
            updateIcon(theme) {
                this.themeIcon.textContent = theme === 'light' ? '🌙' : '☀️';
                this.themeToggle.setAttribute('aria-label', 
                    theme === 'light' ? 'Ativar tema escuro' : 'Ativar tema claro');
            }
        }
        
        // Inicializar quando DOM carregar
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
        });
    </script>
</body>
</html>
